<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restoring Kitengela: Reforestation Story</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="/static/css/styles.css" rel="stylesheet">
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <h1>Restoring Kitengela: A Path to Reforestation</h1>
        <p>Learn how we can transform the land and restore hope through reforestation. Together, we can create a sustainable future.</p>
      </div>
    </header>

    <!-- Section 1: How We Got Here -->
    <section class="section">
      <div class="container">
        <h2 class="section-heading">How We Got Here</h2>
        <div class="row align-items-center">
          <div class="col-md-6">
            <p class="content-text">Our land was once fertile and rich, but years of deforestation, overgrazing, and environmental neglect have led to soil erosion, loss of biodiversity, and a drier climate. This has affected our ability to grow food and access water, threatening the survival of communities.</p>
          </div>
          <div class="col-md-6">
            <img src="/static/img/past-kitengela.webp" alt="Fertile land in the past" class="story-image">
          </div>
        </div>
      </div>
    </section>

    <!-- Section 2: The Consequences of Inaction -->
    <section class="section bg-light">
      <div class="container">
        <h2 class="section-heading">The Consequences of Inaction</h2>
        <div class="row align-items-center">
          <div class="col-md-6">
            <img src="/static/img/present-kitengela.webp" alt="Barren landscape" class="story-image">
          </div>
          <div class="col-md-6">
            <p class="content-text">If we do nothing, the land will continue to degrade, leading to the permanent loss of vegetation, water scarcity, and uninhabitable conditions. The consequences will be felt not only by the current generation but by generations to come.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: The Hope of Action -->
    <section class="section">
      <div class="container">
        <h2 class="section-heading">The Hope of Action</h2>
        <div class="row align-items-center">
          <div class="col-md-6">
            <p class="content-text">When we take action by planting trees, we restore life to the land. Trees help retain moisture, improve soil quality, and attract rainfall. They also support biodiversity and provide shade, cooling the local climate.</p>
          </div>
          <div class="col-md-6">
            <img src="/static/img/plant.jpeg" alt="Forest landscape" class="story-image">
          </div>
        </div>
      </div>
    </section>

    <!-- Section 4: The Science of Reforestation -->
    <section class="section bg-light">
      <div class="container">
        <h2 class="section-heading">The Science Behind It</h2>
        <blockquote class="quote">"A single tree can cool the air, improve soil fertility, and increase rainfall in a region. We have the power to transform the environment with reforestation."</blockquote>
        <p class="content-text text-center">Reforestation is not just about planting trees. It's about understanding the right trees for the right conditions. By choosing drought-resistant species, we can create long-term, sustainable impact in Kitengela.</p>
        <div class="row">
          <div class="col-md-12">
            <img src="/static/img/kakamega.gif" alt="Forest landscape" class="story-image">
          </div>
        </div>
      </div>
    </section>

    <!-- Section 5: Map Comparisons -->
    <section class="comparison-section">
      <div class="container">
        <h2 class="section-heading text-center">How Our Things Have Changed</h2>
        <div class="container mb-5">
          <h3 class="text-center mb-4 custom-heading">Vegetation Distribution</h3>
          <div class="iframe-container">
            <iframe src="https://livingatlas.arcgis.com/landcoverexplorer/#mapCenter=38.35282%2C0.62418%2C4.924370935066931&mode=step&timeExtent=2017%2C2021&year=2022" allowfullscreen></iframe>
          </div>
        </div>

        <h3 class="text-center mb-4 custom-heading">Weather Data Overview</h3>
        <div class="table-responsive">
          <table class="table table-bordered table-custom">
            <thead>
              <tr>
                <th><i class="fas fa-calendar-alt"></i> Year</th>
                <th><i class="fas fa-cloud-rain"></i> Total Rainfall (mm)</th>
                <th><i class="fas fa-thermometer-half"></i> Avg Temperature (°C)</th>
                <th><i class="fas fa-star"></i> Rating</th>
                <th><i class="fas fa-arrow-up"></i> Highest Monthly Rainfall</th>
                <th><i class="fas fa-arrow-up"></i> Highest Monthly Temperature</th>
                <th><i class="fas fa-arrow-down"></i> Lowest Monthly Rainfall</th>
                <th><i class="fas fa-arrow-down"></i> Lowest Monthly Temperature</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2020</td>
                <td class="rain-cell">1200</td>
                <td class="temp-cell">18</td>
                <td class="rating-moderate">Moderate</td>
                <td>June (200mm)</td>
                <td>August (30°C)</td>
                <td>February (50mm)</td>
                <td>December (5°C)</td>
              </tr>
              <tr>
                <td>2021</td>
                <td class="rain-cell">800</td>
                <td class="temp-cell">22</td>
                <td class="rating-low">Low</td>
                <td>March (150mm)</td>
                <td>July (35°C)</td>
                <td>December (20mm)</td>
                <td>January (10°C)</td>
              </tr>
              <tr>
                <td>2022</td>
                <td class="rain-cell">1500</td>
                <td class="temp-cell">15</td>
                <td class="rating-high">High</td>
                <td>July (300mm)</td>
                <td>September (28°C)</td>
                <td>January (70mm)</td>
                <td>February (4°C)</td>
              </tr>
              <tr>
                <td>2023</td>
                <td class="rain-cell">900</td>
                <td class="temp-cell">20</td>
                <td class="rating-moderate">Moderate</td>
                <td>April (180mm)</td>
                <td>August (29°C)</td>
                <td>November (30mm)</td>
                <td>January (8°C)</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

      </div>
    </section>

    <section class="mt-5">
      <div class="container">
        <h2 class="section-heading">Suitable Plants to Grow</h2>
        <div class="row justify-content-center" id="plant-data">
          <!-- Plant cards will be inserted here -->
        </div>
      </div>
    </section>

    <!-- Section 6: Call to Action -->
    <section class="call-to-action">
      <div class="container">
        <h2>Join the Movement to Reforest Kitengela</h2>
        <p>Let's come together and make a difference. Every tree planted is
        a step towards restoring our land and securing a future for our communities. Be part of the solution today.</p>
        <a href="#contact" class="btn btn-main">Get Involved</a>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2024 Reforestation Movement. All rights reserved. | Designed with care for Kitengela and beyond.</p>
      </div>
    </footer>

    <!-- Optional JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      async function fetchPlantData() {
              try {
                      const response = await fetch("http://127.0.0.1:5000/api/plants?climate_zone=temperate&latitude=34.0522&longitude=-118.2437");

                      if (!response.ok) {
                              throw new Error(`HTTP error! status: ${response.status}`);
                            }

                      const data = await response.json();
                      displayPlants(data.data);
                    } catch (error) {
                            console.error('Error fetching plant data:', error);
                          }
            }

      function displayPlants(plants) {
              const plantDataContainer = document.getElementById('plant-data');
              plantDataContainer.innerHTML = ''; // Clear existing data

              plants.forEach(plant => {
                      const imageUrl = plant.image_url || 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWQwE9uVmHAYj0cF7B0tg9140LPsKCEh4GpA&s'; // Placeholder image
                      const plantCard = `
     <div class="col-md-4">
     <div class="card">
     <img src="${imageUrl}" class="card-img-top" alt="${plant.common_name}" onerror="this.onerror=null; this.src='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSWQwE9uVmHAYj0cF7B0tg9140LPsKCEh4GpA&s'">
     <div class="card-body">
     <h5 class="card-title">${plant.common_name}</h5>
     <p class="card-text"><strong>Scientific Name:</strong> ${plant.scientific_name}</p>
     </div>
     </div>
     </div>
     `;
                      plantDataContainer.innerHTML += plantCard; // Append new card
                    });
            }

      // Call the function on page load
      fetchPlantData();
    </script>
  </body>
</html>
